<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContactForm</title>
    <style>
        
      .counter {
        max-width: 400px;
        margin: 2rem auto;
        padding: 2rem;
        border: 2px solid #667eea;
        border-radius: 12px;
        background: #f8f9ff;
        text-align: center;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      }
      
      .counter h3 {
        color: #2c3e50;
        margin-bottom: 1.5rem;
      }
      
      .counter-display {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin: 1.5rem 0;
      }
      
      .counter button {
        background: #667eea;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 0.5rem 1rem;
        cursor: pointer;
        font-weight: 600;
        min-width: 40px;
      }
      
      .counter button:hover:not(:disabled) {
        background: #5a6fd8;
      }
      
      .counter button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
      
      .count {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2c3e50;
        min-width: 100px;
      }
      
      .count.high {
        color: #e74c3c;
      }
      
      .warning {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        color: #856404;
        padding: 0.5rem;
        border-radius: 4px;
        margin: 1rem 0;
      }
      
      .reset-btn {
        background: #e74c3c !important;
      }
      
      .reset-btn:hover {
        background: #c0392b !important;
      }
      
      .contact-form-container {
        max-width: 500px;
        margin: 2rem auto;
        padding: 2rem;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: white;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      }
      
      .form-group {
        margin-bottom: 1.5rem;
      }
      
      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #333;
      }
      
      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 1rem;
        box-sizing: border-box;
      }
      
      .form-group input.invalid,
      .form-group textarea.invalid {
        border-color: #e74c3c;
      }
      
      .error {
        color: #e74c3c;
        font-size: 0.875rem;
        margin-top: 0.25rem;
        display: block;
      }
      
      .submit-btn {
        background: #27ae60;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        cursor: pointer;
        font-weight: 600;
      }
      
      .submit-btn:hover:not(:disabled) {
        background: #229954;
      }
      
      .submit-btn:disabled {
        background: #95a5a6;
        cursor: not-allowed;
      }
      
      .success-message {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1rem;
      }
      
      .note {
        font-size: 0.875rem;
        color: #666;
        margin-top: 1rem;
        font-style: italic;
      }
    
    </style>
</head>
<body>
    <div id="app">
        <div class="contact-form-container">
      <h2>Contact Form</h2>
      
      <div data-mtm-if="submitted" style="display: none;">
        <div class="success-message">
          âœ… Thank you! Your message has been sent successfully.
        </div>
      {:else}
        <form class="contact-form" submit=<span data-mtm-bind="handleSubmit"></span>>
          <div class="form-group">
            <label for="name">Name *</label>
            <input
              id="name"
              type="text"
              value=<span data-mtm-bind="name"></span>
              input=<span data-mtm-bind="updateName"></span>
              class:invalid=<span data-mtm-bind="name && !$isValidName"></span>
              placeholder="Enter your full name"
              required
            />
            {#if $name && !$isValidName}
              <span class="error">Name must be at least 2 characters</span>
            </div>
          </div>

          <div class="form-group">
            <label for="email">Email *</label>
            <input
              id="email"
              type="email"
              value=<span data-mtm-bind="email"></span>
              input=<span data-mtm-bind="updateEmail"></span>
              class:invalid=<span data-mtm-bind="email && !$isValidEmail"></span>
              placeholder="Enter your email address"
              required
            />
            <div data-mtm-if="email && !$isValidEmail" style="display: none;">
              <span class="error">Please enter a valid email address</span>
            </div>
          </div>

          <div class="form-group">
            <label for="message">Message *</label>
            <textarea
              id="message"
              value=<span data-mtm-bind="message"></span>
              input=<span data-mtm-bind="updateMessage"></span>
              class:invalid=<span data-mtm-bind="message && !$isValidMessage"></span>
              placeholder="Enter your message (minimum 10 characters)"
              rows="5"
              required
            ></textarea>
            <div data-mtm-if="message && !$isValidMessage" style="display: none;">
              <span class="error">Message must be at least 10 characters</span>
            </div>
          </div>

          <div class="form-actions">
            <button 
              type="submit" 
              disabled={!$isFormValid || $isSubmitting}
              class="submit-btn"
            >
              <div data-mtm-if="isSubmitting" style="display: none;">
                Sending...
              {:else}
                Send Message
              </div>
            </button>
          </div>
        </form>
      {/if}
      
      <p class="note">
        This form works like PHP + Next.js - pure HTML/JS with reactive updates!
      </p>
    </div>
    </div>
    
    <script>
        
// MTM Signal System for Pure HTML/JS
class MTMSignal {
  constructor() {
    this.signals = new Map();
    this.subscribers = new Map();
  }
  
  signal(key, initialValue) {
    if (!this.signals.has(key)) {
      this.signals.set(key, initialValue);
      this.subscribers.set(key, new Set());
    }
    
    return {
      get value() {
        return window.mtm.signals.get(key);
      },
      set value(newValue) {
        window.mtm.signals.set(key, newValue);
        window.mtm.notifySubscribers(key, newValue);
      }
    };
  }
  
  emit(event, data) {
    const eventKey = `event:${event}`;
    this.notifySubscribers(eventKey, data);
  }
  
  on(event, callback) {
    const eventKey = `event:${event}`;
    if (!this.subscribers.has(eventKey)) {
      this.subscribers.set(eventKey, new Set());
    }
    this.subscribers.get(eventKey).add(callback);
  }
  
  notifySubscribers(key, value) {
    if (this.subscribers.has(key)) {
      this.subscribers.get(key).forEach(callback => callback(value));
    }
  }
  
  subscribe(key, element, property) {
    if (!this.subscribers.has(key)) {
      this.subscribers.set(key, new Set());
    }
    
    const updateElement = (value) => {
      if (property === 'textContent') {
        element.textContent = value;
      } else if (property === 'innerHTML') {
        element.innerHTML = value;
      } else if (property.startsWith('class:')) {
        const className = property.split(':')[1];
        element.classList.toggle(className, value);
      } else {
        element.setAttribute(property, value);
      }
    };
    
    this.subscribers.get(key).add(updateElement);
    updateElement(this.signals.get(key)); // Initial update
  }
}

// Initialize global MTM instance
window.mtm = new MTMSignal();
window.signal = (key, initialValue) => window.mtm.signal(key, initialValue);
window.emit = (event, data) => window.mtm.emit(event, data);

        
        function ContactForm() {
  const $name = signal('name', '');
  const $email = signal('email', '');
  const $message = signal('message', '');
  const $isSubmitting = signal('isSubmitting', false);
  const $submitted = signal('submitted', false);
  let $isValidName = $name.trim().length >= 2;
  let $isValidEmail = $email.includes('@') && $email.includes('.');
  let $isValidMessage = $message.trim().length >= 10;
  let $isFormValid = $isValidName && $isValidEmail && $isValidMessage;
  let $handleSubmit = async ($e) => {;
  let $isSubmitting = true;
  let $formData = {;
  let $name = '';
  let $email = '';
  let $message = '';
  let $submitted = true;
  let $submitted = false, 3000);
  let $isSubmitting = false;
  let $updateName = ($e) => $name = $e.target.value;
  let $updateEmail = ($e) => $email = $e.target.value;
  let $updateMessage = ($e) => $message = $e.target.value;

  // Set up DOM bindings
  const container = document.getElementById('app');

  container.querySelectorAll('[data-mtm-bind="name"]').forEach(el => {
    mtm.subscribe('name', el, 'textContent');
  });
  container.querySelectorAll('[data-mtm-bind="email"]').forEach(el => {
    mtm.subscribe('email', el, 'textContent');
  });
  container.querySelectorAll('[data-mtm-bind="message"]').forEach(el => {
    mtm.subscribe('message', el, 'textContent');
  });
  container.querySelectorAll('[data-mtm-bind="isSubmitting"]').forEach(el => {
    mtm.subscribe('isSubmitting', el, 'textContent');
  });
  container.querySelectorAll('[data-mtm-bind="submitted"]').forEach(el => {
    mtm.subscribe('submitted', el, 'textContent');
  });

  // Handle conditional rendering
  const updateConditionals = () => {
    container.querySelectorAll('[data-mtm-if="name"]').forEach(el => {
      el.style.display = $name.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="email"]').forEach(el => {
      el.style.display = $email.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="message"]').forEach(el => {
      el.style.display = $message.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="isSubmitting"]').forEach(el => {
      el.style.display = $isSubmitting.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="submitted"]').forEach(el => {
      el.style.display = $submitted.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="isValidName"]').forEach(el => {
      el.style.display = $isValidName.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="isValidEmail"]').forEach(el => {
      el.style.display = $isValidEmail.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="isValidMessage"]').forEach(el => {
      el.style.display = $isValidMessage.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="isFormValid"]').forEach(el => {
      el.style.display = $isFormValid.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="handleSubmit"]').forEach(el => {
      el.style.display = $handleSubmit.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="isSubmitting"]').forEach(el => {
      el.style.display = $isSubmitting.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="formData"]').forEach(el => {
      el.style.display = $formData.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="name"]').forEach(el => {
      el.style.display = $name.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="email"]').forEach(el => {
      el.style.display = $email.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="message"]').forEach(el => {
      el.style.display = $message.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="submitted"]').forEach(el => {
      el.style.display = $submitted.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="submitted"]').forEach(el => {
      el.style.display = $submitted.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="isSubmitting"]').forEach(el => {
      el.style.display = $isSubmitting.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="updateName"]').forEach(el => {
      el.style.display = $updateName.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="updateEmail"]').forEach(el => {
      el.style.display = $updateEmail.value ? 'block' : 'none';
    });
    container.querySelectorAll('[data-mtm-if="updateMessage"]').forEach(el => {
      el.style.display = $updateMessage.value ? 'block' : 'none';
    });
  };
  updateConditionals();
  mtm.subscribe('name', null, updateConditionals);
  mtm.subscribe('email', null, updateConditionals);
  mtm.subscribe('message', null, updateConditionals);
  mtm.subscribe('isSubmitting', null, updateConditionals);
  mtm.subscribe('submitted', null, updateConditionals);
}

        
        // Initialize component
        document.addEventListener('DOMContentLoaded', () => {
            ContactForm();
        });
    </script>
</body>
</html>